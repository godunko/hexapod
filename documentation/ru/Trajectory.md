# Траектория движения

## Движение центра тела робота

С пульта управления движение робота задаётся в системе координат тела как вектор линейной скорости (в виде составляющих по осям X и Y) $v_B = [v_{xB}, v_{yB}]$ и вектор угловой скорости (скорости рысканья) $\omega_B$. 
Получается, что центр робота совершает движение по дуге окружности с радиусом $r_m$ вокруг некоторой точки $C_{mB} = [C_{xB}, C_{yB}]$.

Радиус траектории можно вычислить из отношения длин векторов линейной и уголовой скоростей:

$$
r_m = \frac{|v_B|}{\omega_B}
$$

И хотя формально можно считать, что движение по прямой есть движение по окружности с бесконечным радиусом, мне это не нравится; да и вводит сложности при вычислениях с плавающий точкой. 
Видимо случай чисто линейного движения нужно рассматривать отдельно.

Вектор линейной скорости является касательным вектором к окружности траектории, следовательно вектор из точки касания в центр окружности будет ортогонален к вектору линейной скорости.
Получить его можно например из единичного вектора линейной скорости поворотом на 90 градусов против часовой стрелки. Длина вектора равна радиусу траектории.

$$
\vec{C_{mB}} = r_m  R_z  \hat{v_B}
  = r_m \left\lbrack \matrix{cos \theta & -sin \theta \cr sin \theta & cos \theta } \right\rbrack  \left\lbrack \matrix{\hat{v_{xB}} \cr \hat{v_{yB}}} \right\rbrack
  = r_m \left\lbrack \matrix{0 & -1 \cr 1 & 0 } \right\rbrack * \left\lbrack \matrix{\hat{v_{xB}} \cr \hat{v_{yB}}} \right\rbrack
  = r_m \left\lbrack \matrix{-\hat{v_{yB}} \cr \hat{v_{xB}}} \right\rbrack
  = \left\lbrack \matrix{- r_m \hat{v_{yB}} \cr r_m \hat{v_{xB}}} \right\rbrack
$$

Поскольку точка касания находится в начале системы координат тела робота верктор $\vec{C_{mB}}$ содержит координаты цента окружности траектории.

$$
\begin{array}{l}
x_C = - r_m \hat{v_{yB}} = - \frac{|v_B|}{\omega_B} \frac{v_{yB}}{|v_B|} = - \frac{v_{yB}}{\omega_B}
\\
y_C = r_m \hat{v_{xB}} = \frac{|v_B|}{\omega_B} \frac{v_{xB}}{|v_B|} = \frac{v_{xB}}{\omega_B}
\end{array}
$$
